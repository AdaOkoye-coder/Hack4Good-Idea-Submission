<?xml version="1.0" encoding="UTF-8"?><record_update table="sp_widget">
    <sp_widget action="INSERT_OR_UPDATE">
        <category>custom</category>
        <client_script/>
        <controller_as>c</controller_as>
        <css>/* ===== Hack4Good Thanks Widget – ServiceNow Colors ===== */

.h4g-thanks {
  max-width: 900px;
  margin: 0 auto;
  padding: 32px;
  background: #032D42;                  /* SN dark background */
  color: #e7ecf7;                       /* Light text */
  border: 1px solid #06354e;
  border-radius: 16px;
  box-shadow: 0 12px 32px rgba(0,0,0,.35);
  background-image:
    radial-gradient(600px 300px at 100% -10%, rgba(99,223,78,.12), transparent 60%),
    radial-gradient(700px 360px at -10% 120%, rgba(0,163,163,.10), transparent 60%);
}

/* Hero */
.h4g-hero {
  text-align: center;
  margin-bottom: 24px;
}
.h4g-hero .fa-check-circle {
  font-size: 42px;
  color: #63DF4E;                       /* SN primary accent */
  margin-bottom: 12px;
}
.h4g-hero h1 {
  font-size: 28px;
  margin: 0 0 8px;
  overflow-wrap: anywhere;              /* wrap long project names */
}
.h4g-hero .muted {
  color: #9fb0ce;
  margin: 0;
}

/* Steps with icons */
.h4g-steps {
  list-style: none;
  margin: 0;
  padding: 0;
}
.h4g-steps &gt; li {
  display: flex;
  gap: 16px;
  border-top: 1px solid #06354e;
  padding: 20px 0;
}
.h4g-steps &gt; li:first-child {
  border-top: none;
}

.h4g-steps .icon {
  flex: 0 0 44px;
  height: 44px;
  border-radius: 10px;
  background: #06354e;
  border: 1px solid #0a4661;
  display: flex;
  align-items: center;
  justify-content: center;
}
.h4g-steps .icon .fa {
  font-size: 18px;
  color: #b9c7e4;
}

.h4g-steps .content h3 {
  margin: 0 0 6px;
  font-size: 18px;
  color: #e7ecf7;
}
.h4g-steps .content p {
  margin: 0 0 10px;
  color: #b9c7e4;
  overflow-wrap: anywhere;              /* also protect step text */
}

/* Buttons */
.h4g-thanks .btn {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 8px 14px;
  border-radius: 10px;
  font-weight: 600;
  border: 1px solid #0a4661;
  background: #06354e;
  color: #e7ecf7;
  text-decoration: none;
  transition: background .15s ease;
}
.h4g-thanks .btn:hover {
  background: #0a4661;
}
.h4g-thanks .btn-primary {
  border: none;
  background: linear-gradient(180deg, #63DF4E, #4bb536); /* SN green gradient */
  color: #032D42;
}
.h4g-thanks .btn-ghost {
  background: transparent;
}

/* Links inside the card */
.h4g-thanks a {
  color: #63DF4E;
}
.h4g-thanks a:hover {
  text-decoration: underline;
}

/* Responsive */
@media (max-width: 720px) {
  .h4g-thanks { padding: 24px; }
  .h4g-steps &gt; li { flex-direction: row; }
}</css>
        <data_table>sp_instance</data_table>
        <demo_data/>
        <description/>
        <docs/>
        <field_list/>
        <has_preview>false</has_preview>
        <id>h4g_thanks</id>
        <internal>false</internal>
        <link><![CDATA[function link(scope, element, attrs, controller) {  }]]></link>
        <name>H4G thanks</name>
        <option_schema/>
        <public>false</public>
        <roles/>
        <script><![CDATA[(function () {
  // --- constants (fill this with your actual CONTRIBUTING link) ---
  var CONTRIBUTING_URL = 'https://example.com/your/CONTRIBUTING.md';

  // --- helpers ---
  function normalizeRepo(url) {
    if (!url) return '';
    url = ('' + url).trim();
    if (url.endsWith('.git')) url = url.slice(0, -4);
    return url.replace(/\/+$/, ''); // remove trailing slash(es)
  }
// replace the helper
function enc(s) { return (s || ''); }

  // === Part 1: Proposal label (display field project_name) ===
  data.proposal = '';
  (function resolveProposal() {
    var id = $sp.getParameter('idea'); // ?idea=<sys_id>
    if (!id) return;
    var gr = new GlideRecord('x_snc_hack4good_0_hack4good_proposal');
    if (gr.get(id)) {
      data.proposal = gr.getDisplayValue(); // uses display field (project_name)
    }
  })();

  // === Part 2: Source control details from sys_repo_config (current app) ===
  data.repo = '';
  data.branch = '';
  data.github_user = '';
  data.contributing_url = CONTRIBUTING_URL;
  data.fork_branch_url = '';
  data.pr_url = '';

  var appId = gs.getCurrentApplicationId(); // current widget/app scope
  if (appId) {
    var rc = new GlideRecord('sys_repo_config');
    rc.addQuery('sys_app', appId);
    rc.orderByDesc('sys_updated_on'); // prefer freshest config
    rc.setLimit(1);
    rc.query();
    if (rc.next()) {
      var repoUrl = normalizeRepo(rc.getValue('url'));
      var branch = rc.getValue('current_branch') || 'main';

      // credential -> GitHub username
      var ghUser = '';
      try {
        var cred = rc.getElement('credential') && rc.getElement('credential').getRefRecord();
        if (cred && cred.isValidRecord()) {
          if (cred.isValidField('user_name')) ghUser = cred.getValue('user_name');
          else if (cred.isValidField('username')) ghUser = cred.getValue('username');
          else ghUser = cred.getDisplayValue('user_name') || cred.getDisplayValue();
        }
      } catch (e) {
        // ignore ACL/cross-scope issues; rest still works
      }

      data.repo = repoUrl;
      data.branch = branch;
      data.github_user = ghUser;

      if (repoUrl) {
        data.fork_branch_url = repoUrl + '/tree/' + enc(branch);
        data.pr_url = repoUrl + '/compare/' + enc(branch) + '?expand=1';
      }
    }
  }
})();]]></script>
        <servicenow>false</servicenow>
        <sys_class_name>sp_widget</sys_class_name>
        <sys_created_by>laszlo.balla@servicenow.com</sys_created_by>
        <sys_created_on>2025-09-28 16:16:34</sys_created_on>
        <sys_id>3e3f8681935032108543b2597bba102c</sys_id>
        <sys_mod_count>23</sys_mod_count>
        <sys_name>H4G thanks</sys_name>
        <sys_package display_value="Hack4Good Idea Submission" source="x_snc_hack4good_0">95b5d2b7938832108543b2597bba109c</sys_package>
        <sys_policy/>
        <sys_scope display_value="Hack4Good Idea Submission">95b5d2b7938832108543b2597bba109c</sys_scope>
        <sys_update_name>sp_widget_3e3f8681935032108543b2597bba102c</sys_update_name>
        <sys_updated_by>laszlo.balla@servicenow.com</sys_updated_by>
        <sys_updated_on>2025-09-28 18:07:12</sys_updated_on>
        <template><![CDATA[<div class="h4g-thanks">

  <!-- Hero / header -->
  <div class="h4g-hero">
    <i class="fa fa-check-circle"></i>
    <h1>
      Thanks
      <span ng-if="data.github_user">{{data.github_user}},</span>
      your idea
      <span ng-if="data.proposal">about "{{data.proposal}}"</span>
      has been submitted!
    </h1>
  </div>

  <!-- Steps -->
  <ol class="h4g-steps">

    <!-- 1. Commit -->
    <li>
      <div class="icon"><i class="fa fa-cloud-upload"></i></div>
      <div class="content">
        <h3>Commit to source control</h3>
        <p>
          Push your changes to <strong>your own repository</strong>. They’ll go to your currently selected branch:
          <strong>{{data.branch || 'main'}}</strong>.
        </p>
        <!-- Placeholder: wire this to your internal SN commit action when ready -->
        <p>
          <a class="btn" href="javascript:void(0)" aria-disabled="true" title="Coming soon">
            <i class="fa fa-cog"></i> Commit changes in ServiceNow
          </a>
        </p>
      </div>
    </li>

    <!-- 2. Verify (and open repo) -->
    <li>
      <div class="icon"><i class="fa fa-search"></i></div>
      <div class="content">
        <h3>Open your repository & verify</h3>
        <p>
          Open your repository and confirm your latest commit appears on
          <strong>{{data.branch || 'main'}}</strong>.
        </p>
        <p ng-if="data.fork_branch_url">
          <a class="btn btn-primary" ng-href="{{data.fork_branch_url}}" target="_blank" rel="noopener">
            <i class="fa fa-github"></i> Open your repository ({{data.branch || 'main'}})
          </a>
        </p>
      </div>
    </li>

    <!-- 3. PR -->
    <li>
      <div class="icon"><i class="fa fa-code-fork"></i></div>
      <div class="content">
        <h3>Create a Pull Request</h3>
        <p>
          From your repo, choose <em>Compare &amp; pull request</em>, add a brief description, and submit the PR to the
          main project. Our guidelines keep things smooth.
        </p>
        <p>
          <a class="btn" ng-if="data.pr_url" ng-href="{{data.pr_url}}" target="_blank" rel="noopener">
            <i class="fa fa-external-link"></i> Create Pull Request
          </a>
          <a class="btn btn-ghost" ng-if="data.contributing_url" ng-href="{{data.contributing_url}}" target="_blank" rel="noopener">
            <i class="fa fa-book"></i> Contributing Guidelines
          </a>
        </p>
      </div>
    </li>

    <!-- 4. Review -->
    <li>
      <div class="icon"><i class="fa fa-clock-o"></i></div>
      <div class="content">
        <h3>Sit back while we review</h3>
        <p>
          Our reviewers will take a look. You’ll get feedback or a merge via GitHub notifications.
          If changes are needed, we’ll comment on your PR.
        </p>
      </div>
    </li>

    <!-- Bonus -->
    <li>
      <div class="icon"><i class="fa fa-refresh"></i></div>
      <div class="content">
        <h3>Bonus: keep your repo in sync</h3>
        <p>
          Periodically sync your repository with the source project. After merges, open Studio and
          <em>Pull from Source Control</em> to refresh your local app.
        </p>
      </div>
    </li>

  </ol>
</div>]]></template>
    </sp_widget>
    <sys_es_latest_script action="INSERT_OR_UPDATE">
        <id>3e3f8681935032108543b2597bba102c</id>
        <sys_created_by>laszlo.balla@servicenow.com</sys_created_by>
        <sys_created_on>2025-09-28 16:16:34</sys_created_on>
        <sys_id>323f0a81935032108543b2597bba1079</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>laszlo.balla@servicenow.com</sys_updated_by>
        <sys_updated_on>2025-09-28 16:16:34</sys_updated_on>
        <table>sp_widget</table>
        <use_es_latest>true</use_es_latest>
    </sys_es_latest_script>
</record_update>
