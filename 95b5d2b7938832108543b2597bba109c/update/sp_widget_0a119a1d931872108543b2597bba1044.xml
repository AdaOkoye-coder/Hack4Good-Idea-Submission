<?xml version="1.0" encoding="UTF-8"?><record_update table="sp_widget">
    <sp_widget action="INSERT_OR_UPDATE">
        <category>custom</category>
        <client_script><![CDATA[function ($scope, $uibModal, $timeout, $window, $sce) {
  var c = $scope;

  // --- Equalize card heights across rows ---
  function equalize() {
    $timeout(function () {
      var cards = document.querySelectorAll('.h4g-proposals .card');
      if (!cards.length) return;
      Array.prototype.forEach.call(cards, function (el) { el.style.height = 'auto'; });
      var max = 0;
      Array.prototype.forEach.call(cards, function (el) { max = Math.max(max, el.offsetHeight); });
      Array.prototype.forEach.call(cards, function (el) { el.style.height = max + 'px'; });
    }, 0);
  }
  $scope.$watch('data.count', equalize);
  var onResize = function () { equalize(); };
  angular.element($window).on('resize', onResize);
  $scope.$on('$destroy', function () { angular.element($window).off('resize', onResize); });

  // --- Modal (dark themed, title+badge in one row) ---
  c.open = function (rec) {
    if (!rec || !rec.sys_id) return;

    $uibModal.open({
      animation: true,
      windowClass: 'h4g-modal',
      size: 'lg',
      backdrop: 'static',
      template:
        '<style>' +
        /* Modal chrome */
        '  .h4g-modal.modal .modal-content{background:#032D42!important;color:#e7ecf7!important;border:1px solid #0a4661!important;border-radius:10px;box-shadow:0 6px 18px rgba(0,0,0,.6)}' +
        '  .h4g-modal.modal .modal-header{background:#06354e!important;border-bottom:1px solid #0a4661!important;color:#e7ecf7!important}' +
        '  .h4g-modal.modal .modal-body{background:#032D42!important;color:#e7ecf7!important;padding:16px 16px 20px!important}' +

        /* Header title row (h1 + badge on one line) */
        '  .h4g-modal-head .title-row{display:flex;align-items:flex-start;justify-content:space-between;gap:12px;width:100%}' +
        '  .h4g-modal-head .modal-title,h1.modal-title{flex:1 1 auto;font-size:24px!important;line-height:1.3;margin:0;word-wrap:break-word}' +
        '  .h4g-modal-head .badge{flex:0 0 auto;margin-top:2px;display:inline-block;padding:4px 8px;border:1px solid #0a4661;background:#032D42;color:#e7ecf7;border-radius:999px;font-size:12px;white-space:nowrap}' +

        /* Section headings */
        '  .h4g-detail h2{font-size:18px!important;font-weight:700;margin:0 0 8px;color:#e7ecf7}' +

        /* Field boxes (applies to all fields incl. date) */
        '  .h4g-detail .field{margin:0 0 14px;background:#06354e;border:1px solid #0a4661;border-radius:10px;padding:12px}' +

        /* Text + date */
        '  .h4g-detail .text{margin:0;color:#e7ecf7;white-space:pre-wrap;overflow-wrap:anywhere}' +
        '  .h4g-detail .when{font-size:14px;color:#e7ecf7}' +

        /* Rendered HTML blocks */
        '  .h4g-detail .html{background:#06354e;border:1px solid #0a4661;border-radius:10px;padding:12px;color:#e7ecf7}' +
        '  .h4g-detail .html p{margin:0 0 10px}' +
        '  .h4g-detail .html a{color:#63DF4E;text-decoration:underline}' +
        '  .h4g-detail .html ul,.h4g-detail .html ol{margin-left:18px}' +
        '  .h4g-detail .html h1,.h4g-detail .html h2,.h4g-detail .html h3{color:#e7ecf7;margin-top:12px}' +
        '</style>' +

        '<div class="modal-header h4g-modal-head">' +
          '<div class="title-row">' +
            '<h1 class="modal-title">{{vm.item.project_name || "Proposal"}}</h1>' +
            '<span class="badge" ng-if="vm.item.focus_area">{{vm.item.focus_area}}</span>' +
          '</div>' +
          '<button type="button" class="close" ng-click="vm.close()" aria-label="Close"><span aria-hidden="true">&times;</span></button>' +
        '</div>' +

        '<div class="modal-body h4g-detail">' +

          '<div class="field" ng-if="vm.item.problem_statement">' +
            '<h2>Problem statement</h2>' +
            '<p class="text">{{vm.item.problem_statement}}</p>' +
          '</div>' +

          '<div class="field" ng-if="vm.impactHtml">' +
            '<h2>Potential impact</h2>' +
            '<div class="html" ng-bind-html="vm.impactHtml"></div>' +
	        '</div>' +
    
			
					'<div class="field" ng-if="vm.solutionHtml">' +
            '<h2>Solution proposal</h2>' +
            '<div class="html" ng-bind-html="vm.solutionHtml"></div>' +
          '</div>' +

          '<div class="field" ng-if="vm.item.created_on">' +
            '<h2>Submitted on</h2>' +
            '<div class="when">{{vm.item.created_on}}</div>' +
          '</div>' +

        '</div>',
      controllerAs: 'vm',
      controller: function ($uibModalInstance) {
        var vm = this;
        vm.item = angular.copy(rec);
        vm.solutionHtml = vm.item.solution_proposal ? $sce.trustAsHtml(vm.item.solution_proposal) : null;
        vm.impactHtml   = vm.item.potential_impact ? $sce.trustAsHtml(vm.item.potential_impact)   : null;
        vm.close = function(){ $uibModalInstance.dismiss('close'); };
      }
    });
  };
}]]></client_script>
        <controller_as>c</controller_as>
        <css>/* ===== H4G Proposals (cards) ===== */
.h4g-proposals {
  max-width: 1120px;
  margin: 0 auto;
  padding: 24px 0;
  color: #e7ecf7;
}

/* Header */
.h4g-proposals .header {
  text-align: center;
  margin-bottom: 24px;
}
.h4g-proposals .header h2 {
  font-size: 26px;
  font-weight: 700;
  margin: 0 0 10px;
  color: #0a4661;   /* same as card title/text */
}
.h4g-proposals .header .sub {
  font-size: 16px;
  color: #0a4661;   /* same muted tone as card meta/desc */
  margin: 0;
}

/* Empty state */
.h4g-proposals .empty {
  border: 1px solid #0a4661; border-radius: 12px; background: #06354e;
  padding: 18px; text-align: center; color: #b9c7e4;
}

/* Grid: centered rows with fixed-width cards */
.h4g-proposals .grid {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;   /* &lt;-- centers the last row */
  gap: 16px;
}

/* Card: fixed width and flex column so meta can pin to bottom */
.h4g-proposals .card {
  width: 340px;                /* prevents last-row stretch */
  display: flex;
  flex-direction: column;
  background: #06354e;
  border: 1px solid #0a4661;
  border-radius: 14px;
  padding: 14px;
  color: inherit;
  text-decoration: none;
  transition: transform .08s ease, box-shadow .18s ease, border-color .18s ease, background .18s ease;
  box-shadow: 0 6px 18px rgba(0,0,0,.22);
  cursor: pointer;
  outline: none;
}
.h4g-proposals .card:hover,
.h4g-proposals .card:focus {
  transform: translateY(-2px);
  border-color: #0f5c7f;
  background: #08405a;
  box-shadow: 0 10px 28px rgba(0,0,0,.28);
}

/* Keep the date row at the bottom */
.h4g-proposals .meta {
  margin-top: auto;
  display: inline-flex;
  align-items: center;
  gap: 8px;
  font-size: 12px;
  color: #9fb0ce;
}

/* Optional: clamp text so cards are naturally closer in height */
.h4g-proposals .title {
  font-size: 18px;
  margin: 0 0 6px;
  line-height: 1.25;
  overflow-wrap: anywhere;
  display: -webkit-box;
  -webkit-line-clamp: 2;           /* keep titles to ~2 lines */
  -webkit-box-orient: vertical;
}
.h4g-proposals .desc {
  margin: 6px 0 10px;
  color: #b9c7e4;
  overflow: hidden;
  display: -webkit-box;
  -webkit-line-clamp: 4;           /* ~4 lines */
  -webkit-box-orient: vertical;
  overflow-wrap: anywhere;
}

/* Card head */
.h4g-proposals .card-head {
  display: block;               /* stack title + badge */
  margin-bottom: 8px;
}

.h4g-proposals .title {
  font-size: 18px;
  margin: 0 0 6px;
  line-height: 1.25;
  max-width: calc(100% - 80px);   /* leaves room for badge */
  display: -webkit-box;
  -webkit-line-clamp: 2;          /* show up to 2 lines */
  -webkit-box-orient: vertical;
  overflow: hidden;
  text-overflow: ellipsis;
}

.h4g-proposals .badge {
  display: inline-block;
  padding: 4px 8px;
  border: 1px solid #0a4661;
  background: #032D42;
  color: #e7ecf7;
  border-radius: 999px;
  font-size: 12px;
  white-space: nowrap;
}

/* Description (multi-line clamp) */
.h4g-proposals .desc {
  margin: 6px 0 10px; color: #b9c7e4; overflow: hidden;
  display: -webkit-box; -webkit-line-clamp: 4; -webkit-box-orient: vertical; overflow-wrap: anywhere;
}

/* Meta row */
.h4g-proposals .meta { display: inline-flex; align-items: center; gap: 8px; font-size: 12px; color: #9fb0ce; }
.h4g-proposals .meta .dot { width: 6px; height: 6px; background: #9fb0ce; border-radius: 50%; }

/* Force dark modal background and text */
.h4g-modal .modal-content {
  background: #032D42 !important;
  color: #e7ecf7 !important;
  border: 1px solid #0a4661 !important;
  border-radius: 10px;
  box-shadow: 0 6px 18px rgba(0,0,0,.6);
}

/* Header */
.h4g-modal .modal-header {
  background: #06354e !important;
  border-bottom: 1px solid #0a4661 !important;
  color: #e7ecf7 !important;
}

/* Body */
.h4g-modal .modal-body {
  background: #032D42 !important;
  color: #e7ecf7 !important;
  padding: 16px 16px 20px;
}

/* Footer (if you ever add one) */
.h4g-modal .modal-footer {
  background: #032D42 !important;
  border-top: 1px solid #0a4661 !important;
}

/* Titles */
.h4g-modal .modal-title { font-size: 22px; margin: 0; } /* &lt;h1&gt; */
.h4g-detail h2 { font-size: 16px; margin: 0 0 8px; font-weight: 700; color: #e7ecf7; }

/* Dividers between sections */
.h4g-detail .divider {
  height: 1px;
  background: #0a4661;
  margin: 14px 0;
  border-radius: 1px;
}

/* Field spacing + text colors */
.h4g-detail .field   { margin: 0; }
.h4g-detail .text    { margin: 0; color: #e7ecf7; white-space: pre-wrap; overflow-wrap: anywhere; }
.h4g-detail .muted   { color: #9fb0ce; }
.h4g-detail .when    { font-size: 14px; color: #b9c7e4; }

/* Badge: identical to card badge */
.h4g-detail .badge {
  display: inline-block;
  padding: 4px 8px;
  border: 1px solid #0a4661;
  background: #032D42;
  color: #e7ecf7;
  border-radius: 999px;
  font-size: 12px;
  white-space: nowrap;
}

/* Rendered HTML blocks from fields */
.h4g-detail .html {
  background: #06354e;
  border: 1px solid #0a4661;
  border-radius: 10px;
  padding: 12px;
  color: #e7ecf7;
}
.h4g-detail .html p { margin: 0 0 10px; }
.h4g-detail .html a { color: #63DF4E; text-decoration: underline; }
.h4g-detail .html ul, .h4g-detail .html ol { margin-left: 18px; }
.h4g-detail .html h1, .h4g-detail .html h2, .h4g-detail .html h3 { color: #e7ecf7; margin-top: 12px; }</css>
        <data_table>sp_instance</data_table>
        <demo_data/>
        <description/>
        <docs/>
        <field_list/>
        <has_preview>true</has_preview>
        <id>h4g_proposals</id>
        <internal>false</internal>
        <link><![CDATA[function link(scope, element, attrs, controller) {  }]]></link>
        <name>H4G Proposals</name>
        <option_schema/>
        <public>false</public>
        <roles/>
        <script><![CDATA[(function () {
  var TBL = 'x_snc_hack4good_0_hack4good_proposal';
  var MAX = parseInt(options.max_results || 24, 10);

  data.items = [];

  var gr = new GlideRecord(TBL);
  gr.orderByDesc('sys_created_on');
  gr.setLimit(MAX);
  gr.query();

	while (gr.next()) {
		data.items.push({
			sys_id: gr.getUniqueValue(),
			project_name: gr.getDisplayValue('project_name') || '',
			focus_area: gr.getDisplayValue('focus_area') || '',
			problem_statement: gr.getValue('problem_statement') || '',
			potential_impact: gr.getValue('potential_impact') || '',   // HTML
			solution_proposal: gr.getValue('solution_proposal') || '',  // HTML
			created_on: gr.getDisplayValue('sys_created_on') || ''      // literal date/time for modal
		});
	}

  data.count = data.items.length;
  data.table = TBL; // used to build the form URL in the modal
})();]]></script>
        <servicenow>false</servicenow>
        <sys_class_name>sp_widget</sys_class_name>
        <sys_created_by>laszlo.balla@servicenow.com</sys_created_by>
        <sys_created_on>2025-09-29 11:03:11</sys_created_on>
        <sys_id>0a119a1d931872108543b2597bba1044</sys_id>
        <sys_mod_count>29</sys_mod_count>
        <sys_name>H4G Proposals</sys_name>
        <sys_package display_value="Hack4Good Idea Submission" source="x_snc_hack4good_0">95b5d2b7938832108543b2597bba109c</sys_package>
        <sys_policy/>
        <sys_scope display_value="Hack4Good Idea Submission">95b5d2b7938832108543b2597bba109c</sys_scope>
        <sys_update_name>sp_widget_0a119a1d931872108543b2597bba1044</sys_update_name>
        <sys_updated_by>laszlo.balla@servicenow.com</sys_updated_by>
        <sys_updated_on>2025-09-29 17:09:22</sys_updated_on>
        <template><![CDATA[<div class="h4g-proposals">
  <div class="header">
    <h2>Check out the latest proposals from the community</h2>
    <p class="sub">Newest ideas appear first — click a card to see full details.</p>
  </div>

  <div ng-if="!data.count" class="empty">
    <p>No proposals yet — be the first to submit!</p>
  </div>

  <div class="grid" ng-if="data.count">
    <div class="card"
         ng-repeat="p in data.items"
         ng-click="open(p)"
         role="button"
         tabindex="0"
         ng-keypress="($event.keyCode===13||$event.keyCode===32) && open(p)">
        <div class="card-head">
          <h3 class="title" title="{{p.project_name}}">{{p.project_name}}</h3>
          <span class="badge" ng-if="p.focus_area">{{p.focus_area}}</span>
        </div>

      <p class="desc" ng-if="p.problem_statement">
        {{p.problem_statement}}
      </p>

      <div class="meta" ng-if="p.created_on">
        <span class="dot"></span>
        <span class="when">Submitted <sn-time-ago timestamp="::p.created_on"/></span>
      </div>
    </div>
  </div>
</div>]]></template>
    </sp_widget>
    <sys_es_latest_script action="INSERT_OR_UPDATE">
        <id>0a119a1d931872108543b2597bba1044</id>
        <sys_created_by>laszlo.balla@servicenow.com</sys_created_by>
        <sys_created_on>2025-09-29 11:03:11</sys_created_on>
        <sys_id>06119a1d931872108543b2597bba1047</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>laszlo.balla@servicenow.com</sys_updated_by>
        <sys_updated_on>2025-09-29 11:03:11</sys_updated_on>
        <table>sp_widget</table>
        <use_es_latest>true</use_es_latest>
    </sys_es_latest_script>
</record_update>
